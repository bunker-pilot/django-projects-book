{% extends "base.html" %}
{% block page_title %}All posts{% endblock %}

{% block content %}
{% if tag %}
    <h1>Posts tagged with "{{tag.name}}"</h1>
{% else %}
    <h1>All posts</h1>
{% endif %}

{% for post in posts %}
<div class="card">
    <img src="{{post.image.url}}" class="post-image">

    <h2>
        <a href="{{post.get_absolute_url}}">
            {{post.title}}
        </a>
    </h2>

    <p class="meta">
        {{post.published}} Â· {{post.author}}
    </p>

    <p>
        {{post.content|truncatewords:30}}
    </p>

    <div class="tags">
        {% for tag in post.tags.all %}
            <span>
                <a href="{% url "blog:posts_by_tags" tag.slug %}">
                    {{tag.name}}{% if not forloop.last %}, {% endif %}
                </a>
            </span>
        {% endfor %}
    </div>
</div>
{% endfor %}

{% include "pagination.html" with page=page_obj %}
{% endblock %}
